{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/core/constants/default.js","webpack:///./src/core/constants/events.js","webpack:///./src/core/constants/status.js","webpack:///./src/core/constants/checkers.js","webpack:///./node_modules/@lppjunior/pattern-js/src/pattern/observer/Observer.js","webpack:///./node_modules/@lppjunior/pattern-js/src/pattern/observer/index.js","webpack:///./node_modules/@lppjunior/pattern-js/src/pattern/pipeline/Pipeline.js","webpack:///./src/core/Actions.js","webpack:///./src/core/Board.js","webpack:///./src/core/State.js","webpack:///./src/core/Minefield.js","webpack:///./src/main.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","GLOBALS","debug","makeLevel","amount","cols","rows","mines","DEFAULTS","EASY","MEDIUM","HARD","EVENTS","ALL","START","NEXT_TURN","FINISH","STATUS","LOSS","PLAYING","WIN","CHECKERS","EMPTY","FLAG","MINE","NUMBER_0","NUMBER_1","NUMBER_2","NUMBER_3","NUMBER_4","NUMBER_5","NUMBER_6","NUMBER_7","NUMBER_8","this","observer","event","callback","addEvent","push","data","forEach","undefined","updateValue","row","col","state","setValue","indexOf","set","openAll","board","map","_","__","open","isFinish","getValue","expand","nextTurn","flag","lastValue","parentRow","parentCol","options","makeBoard","makeMines","Array","fill","count","mine","getRandomMap","_mine","join","fillAround","rand","size","Math","floor","random","make","init","total","status","checked","updated","isWin","isLoss","fn","on","emit","getState","updateStatus","length","keys","Actions","action","getInstance","game","instance","addListener","start","x","y","reset"],"mappings":"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","file":"minefield.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const GLOBALS = {\n  debug: false\n}\n\nconst makeLevel = amount => ({\n  cols: amount,\n  rows: amount,\n  mines: amount\n})\n\nexport const DEFAULTS = {\n  EASY: {\n    ...GLOBALS,\n    ...makeLevel(10)\n  },\n\n  MEDIUM: {\n    ...GLOBALS,\n    ...makeLevel(15)\n  },\n\n  HARD: {\n    ...GLOBALS,\n    ...makeLevel(30)\n  }\n}\n","export const EVENTS = {\n  ALL: 'all',\n  START: 'start',\n  NEXT_TURN: 'nextTurn',\n  FINISH: 'finish'\n}\n","export const STATUS = {\n  LOSS: 'LOSS',\n  PLAYING: 'PLAYING',\n  WIN: 'WIN'\n}\n","export const CHECKERS = {\n  EMPTY: '',\n  FLAG: 'F',\n  MINE: -1,\n  NUMBER_0: 0,\n  NUMBER_1: 2,\n  NUMBER_2: 3,\n  NUMBER_3: 3,\n  NUMBER_4: 4,\n  NUMBER_5: 5,\n  NUMBER_6: 6,\n  NUMBER_7: 7,\n  NUMBER_8: 8\n}\n","class Observer {\n  constructor () {\n    this.observer = []\n  }\n\n  on (event, callback) {\n    this.addEvent(event)\n    this.observer[event].push(callback)\n\n    return this\n  }\n\n  emit (event, data) {\n    this.addEvent(event)\n    this.observer[event].forEach(callback => callback(data))\n  }\n\n  addEvent (event) {\n    if (this.observer[event] === undefined) {\n      this.observer[event] = []\n    }\n  }\n}\n\nexport default Observer\n","import Observer from './Observer'\n\nexport default Observer\n","class Pipeline {\n  constructor () {\n    this.pipelines = []\n  }\n\n  pipe (callback) {\n    this.pipelines.push(callback)\n    return this\n  }\n\n  process (data) {\n    let result = data\n    return this.pipelines.map(fn => (result = fn(result))).pop()\n  }\n}\n\nexport default Pipeline\n","import { CHECKERS } from './constants'\n\nexport default {\n  updateValue: function (row, col, value) {\n    this.state.setValue(row, col, value)\n    this.state.get('updated').push({ row, col, value })\n\n    if ([CHECKERS.EMPTY, CHECKERS.FLAG, CHECKERS.MINE].indexOf(value) === -1) {\n      this.state.set('checked', this.state.get('checked') + 1)\n    }\n  },\n\n  openAll: function () {\n    const board = this.state.get('board')\n    board.map((_, row) => _.map((__, col) => {\n      board[row][col] = this.board[row][col]\n    }))\n\n    this.state.set('board', board)\n  },\n\n  open: function (row, col) {\n    if (this.state.isFinish()) {\n      return\n    }\n\n    this.state.set('updated', [])\n\n    if (this.state.getValue(row, col) === CHECKERS.EMPTY) {\n      const value = this.board[row][col]\n\n      this.updateValue(row, col, value)\n\n      if (value === 0) {\n        this.expand(row, col)\n      }\n    }\n\n    this.nextTurn()\n  },\n\n  flag: function (row, col) {\n    if (this.state.isFinish()) {\n      return\n    }\n\n    this.state.set('updated', [])\n\n    const lastValue = this.state.getValue(row, col)\n    if ([CHECKERS.FLAG, CHECKERS.EMPTY].indexOf(lastValue) > -1) {\n      this.updateValue(row, col, lastValue === CHECKERS.FLAG ? CHECKERS.EMPTY : CHECKERS.FLAG)\n    }\n\n    this.nextTurn()\n  },\n\n  expand: function (parentRow, parentCol) {\n    for (let row = parentRow - 1; row <= parentRow + 1; row++) {\n      for (let col = parentCol - 1; col <= parentCol + 1; col++) {\n        if (this.board[row] !== undefined &&\n            this.board[row][col] !== undefined &&\n            this.board[row][col] >= CHECKERS.NUMBER_0 &&\n            this.board[row][col] <= CHECKERS.NUMBER_8 &&\n            this.state.get('board')[row][col] === CHECKERS.EMPTY) {\n          this.updateValue(row, col, this.board[row][col])\n\n          if (this.board[row][col] === CHECKERS.NUMBER_0) {\n            this.expand(row, col)\n          }\n        }\n      }\n    }\n  }\n}\n","import { CHECKERS } from './constants'\n\nclass Board {\n  constructor (options) {\n    this.options = options\n  }\n\n  make () {\n    this.makeBoard()\n    this.makeMines()\n\n    return this.data\n  }\n\n  makeBoard () {\n    this.data = Array(this.options.rows)\n      .fill(null)\n      .map(() => Array(this.options.cols)\n        .fill(null)\n        .map(() => 0)\n      )\n  }\n\n  makeMines () {\n    let count = 0\n    let mines = ''\n\n    do {\n      const mine = this.getRandomMap()\n      const _mine = `${mine.join(',')}|`\n\n      if (mines.indexOf(_mine) === -1) {\n        this.data[mine[0]][mine[1]] = CHECKERS.MINE\n        this.fillAround(mine)\n\n        mines += _mine\n        count++\n      }\n    } while (count < this.options.mines)\n  }\n\n  fillAround (mine) {\n    for (let row = mine[0] - 1; row <= mine[0] + 1; row++) {\n      for (let col = mine[1] - 1; col <= mine[1] + 1; col++) {\n        if (this.data[row] !== undefined && this.data[row][col] !== undefined && this.data[row][col] > -1) {\n          this.data[row][col]++\n        }\n      }\n    }\n  }\n\n  getRandomMap () {\n    const rand = (size) => Math.floor(Math.random() * size)\n\n    return [\n      rand(this.options.rows),\n      rand(this.options.cols)\n    ]\n  }\n}\n\nBoard.make = (options) => ((new Board(options)).make())\n\nexport default Board\n","import { STATUS } from './constants'\n\nclass State {\n  constructor (options, board) {\n    this.options = options\n    this.board = board\n\n    this.init()\n  }\n\n  init () {\n    this.state = {\n      rows: this.options.rows,\n      cols: this.options.cols,\n      total: this.options.cols * this.options.rows - this.options.mines,\n      status: STATUS.PLAYING,\n      checked: 0,\n      updated: [],\n      board: Array(this.options.rows)\n        .fill(null)\n        .map(() => Array(this.options.cols)\n          .fill(null)\n          .map(() => '')\n        )\n    }\n  }\n\n  get (key) {\n    return key ? this.state[key] : this.state\n  }\n\n  set (key, value) {\n    this.state[key] = value\n  }\n\n  getValue (row, col) {\n    return this.state.board[row][col]\n  }\n\n  setValue (row, col, value) {\n    this.state.board[row][col] = value\n  }\n\n  isWin () {\n    return this.get('status') === STATUS.WIN\n  }\n\n  isLoss () {\n    return this.get('status') === STATUS.LOSS\n  }\n\n  isFinish () {\n    return this.isWin() || this.isLoss()\n  }\n}\n\nexport default State\n","import { Observer } from '@lppjunior/pattern-js'\n\nimport Actions from './Actions'\nimport Board from './Board'\nimport State from './State'\nimport { EVENTS, STATUS, CHECKERS } from './constants'\n\nclass Minefield {\n  constructor (options) {\n    this.options = {\n      ...options\n    }\n\n    this.observer = new Observer()\n  }\n\n  addListener (event, fn) {\n    this.observer.on(event, fn)\n  }\n\n  emit (event) {\n    this.observer.emit(event, this.getState())\n    this.observer.emit(EVENTS.ALL, { event, state: this.getState() })\n  }\n\n  start () {\n    this.board = Board.make(this.options)\n    this.state = new State(this.options, this.board)\n\n    this.emit(EVENTS.START)\n\n    return this\n  }\n\n  getState () {\n    const data = this.state.get()\n\n    if (this.options.debug) {\n      data.debug = {\n        board: this.board\n      }\n    }\n\n    return data\n  }\n\n  nextTurn () {\n    this.updateStatus()\n\n    switch (this.state.get('status')) {\n      case STATUS.PLAYING:\n        this.emit(EVENTS.NEXT_TURN)\n        break\n      case STATUS.LOSS:\n      case STATUS.WIN:\n        this.openAll()\n        this.emit(EVENTS.FINISH)\n        break\n    }\n  }\n\n  updateStatus () {\n    if (this.state.get('updated').length === 0) return\n\n    this.state.set('status',\n      this.state.get('updated')[0].value === CHECKERS.MINE ? STATUS.LOSS\n        : this.state.get('checked') === this.state.get('total') ? STATUS.WIN\n          : STATUS.PLAYING\n    )\n  }\n}\n\nObject.keys(Actions).forEach(action => { Minefield.prototype[action] = Actions[action] })\n\nexport default Minefield\n","import * as CONFIG from './core/constants'\nimport { Minefield } from './core'\n\nexport function getInstance (options = CONFIG.DEFAULTS.MEDIUM) {\n  const game = new Minefield(options)\n\n  const instance = {\n    addListener: (event, fn) => {\n      game.addListener(event, fn)\n\n      return instance\n    },\n    start: () => game.start(),\n    open: (x, y) => game.open(x, y),\n    flag: (x, y) => game.flag(x, y),\n    getState: () => game.getState(),\n    reset: () => game.start()\n  }\n\n  return instance\n}\n\nexport const CHECKERS = CONFIG.CHECKERS\nexport const DEFAULTS = CONFIG.DEFAULTS\nexport const EVENTS = CONFIG.EVENTS\nexport const STATUS = CONFIG.STATUS\n\nexport default {\n  getInstance\n}\n"],"sourceRoot":""}